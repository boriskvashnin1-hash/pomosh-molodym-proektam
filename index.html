<!DOCTYPE html>
<html lang="ru">
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
  // –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è —Ç–µ—Å—Ç–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–∏!)
  const SUPABASE_URL = 'https://–≤–∞—à-id.supabase.co'
  const SUPABASE_ANON_KEY = '–≤–∞—à-public-key'
  
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY)
  
  // –î–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
  window.db = supabase
  console.log('Supabase –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω')
</script>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–º–æ—â—å –º–æ–ª–æ–¥—ã–º –ø—Ä–æ–µ–∫—Ç–∞–º</title>
    <meta name="description" content="–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–æ–ª–æ–¥—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –∏–¥–µ–π">
    <link rel="stylesheet" href="style.css">
    <script src="js/database.js"></script>
</head>
<body>
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="navbar">
        <div class="nav-brand">
            <h1>üéØ –ü–æ–º–æ—â—å–ü—Ä–æ–µ–∫—Ç–∞–º</h1>
        </div>
        <div class="nav-links">
            <a href="#/" class="nav-link" data-route="home">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="#/projects" class="nav-link" data-route="projects">–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã</a>
            <a href="#/create" class="nav-link" data-route="create">–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</a>
            <a href="#/stats" class="nav-link" data-route="stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
        </div>
        <div class="nav-actions">
            <button class="theme-toggle" onclick="app.toggleTheme()" title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É">
                <span id="themeIcon">üåô</span>
            </button>
            <button id="authBtn" class="btn btn-outline">–í–æ–π—Ç–∏</button>
            <div id="userMenu" style="display: none;">
                <div class="user-avatar" id="userAvatar">U</div>
                <span id="userName"></span>
                <button onclick="app.logout()" class="btn btn-outline">–í—ã–π—Ç–∏</button>
            </div>
        </div>
    </nav>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main id="app-content">
        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
    </main>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="modalOverlay" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div id="modalBody"></div>
            <button onclick="app.hideModal()" class="btn btn-cancel">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div id="notifications" class="notifications"></div>

    <!-- –§—É—Ç–µ—Ä -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>üéØ –ü–æ–º–æ—â—å–ü—Ä–æ–µ–∫—Ç–∞–º</h3>
                <p>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–æ–ª–æ–¥—ã—Ö –∏–¥–µ–π –∏ –Ω–∞—á–∏–Ω–∞–Ω–∏–π</p>
            </div>
            <div class="footer-section">
                <h4>–ù–∞–≤–∏–≥–∞—Ü–∏—è</h4>
                <a href="#/" onclick="app.navigate('home')">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="#/projects" onclick="app.navigate('projects')">–ü—Ä–æ–µ–∫—Ç—ã</a>
                <a href="#/create" onclick="app.navigate('create')">–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</a>
            </div>
            <div class="footer-section">
                <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
<section id="registration" style="display: none; padding: 40px 20px; background: #f5f5f5;">
  <div class="container">
    <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –¥–ª—è —É—á–∞—â–∏—Ö—Å—è</h2>
    
    <form id="registerForm" onsubmit="return false;">
      <div class="form-group">
        <input type="text" id="fullName" placeholder="–§–ò–û" required>
      </div>
      <div class="form-group">
        <input type="email" id="email" placeholder="Email" required>
      </div>
      <div class="form-group">
        <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)" minlength="6" required>
      </div>
      <div class="form-group">
        <input type="text" id="school" placeholder="–®–∫–æ–ª–∞/–£—á–µ–±–Ω–æ–µ –∑–∞–≤–µ–¥–µ–Ω–∏–µ">
      </div>
      <div class="form-group">
        <input type="text" id="class" placeholder="–ö–ª–∞—Å—Å/–ì—Ä—É–ø–ø–∞">
      </div>
      <div class="form-group">
        <button type="button" onclick="registerUser()" style="padding: 12px 30px; background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer;">
          –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
        </button>
      </div>
    </form>
    
    <p id="registerMessage"></p>
  </div>
</section>

<!-- –ö–Ω–æ–ø–∫–∞ –ø–æ–∫–∞–∑–∞/—Å–∫—Ä—ã—Ç–∏—è —Ñ–æ—Ä–º—ã -->
<button onclick="toggleRegistration()" style="position: fixed; bottom: 20px; right: 20px; padding: 10px 20px; background: #2196F3; color: white; border: none; border-radius: 50px; cursor: pointer; z-index: 1000;">
  üë§ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
</button>

<script>
// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ñ–æ—Ä–º—ã
function toggleRegistration() {
  const form = document.getElementById('registration')
  form.style.display = form.style.display === 'none' ? 'block' : 'none'
}

async function registerUser() {
  const userData = {
    full_name: document.getElementById('fullName').value,
    email: document.getElementById('email').value,
    school: document.getElementById('school').value,
    class: document.getElementById('class').value
  }
  
  const password = document.getElementById('password').value
  
  const messageEl = document.getElementById('registerMessage')
  messageEl.style.color = 'blue'
  messageEl.textContent = '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è...'
  
  try {
    const { data, error } = await window.database.registerUser(
      userData.email,
      password,
      userData
    )
    
    if (error) throw error
    
    messageEl.style.color = 'green'
    messageEl.innerHTML = '‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!<br>–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã.'
    
    // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
    document.getElementById('registerForm').reset()
    
    // –°–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
    setTimeout(() => {
      document.getElementById('registration').style.display = 'none'
    }, 3000)
    
  } catch (error) {
    messageEl.style.color = 'red'
    messageEl.textContent = `–û—à–∏–±–∫–∞: ${error.message}`
  }
}
</script>
                <h4>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
                <p>Email: help@projects.ru</p>
                <p>–¢–µ–ª–µ—Ñ–æ–Ω: +7 (999) 123-45-67</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 –ü–æ–º–æ—â—å–ü—Ä–æ–µ–∫—Ç–∞–º. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </div>
    </footer>

    <script src="app.js"></script>
    <script>
        // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–º—ã
        if (localStorage.getItem('darkTheme') === 'true') {
            document.body.classList.add('dark-theme');
            document.getElementById('themeIcon').textContent = '‚òÄÔ∏è';
        }
        
    </script>
</body>
</html>
